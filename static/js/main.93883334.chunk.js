(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{20:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAA+lJREFUeF7tWoFx1TAMfZoAOgF0AsoEwATQCWgngE4AnQCYgDIBZQJgAugEtBPQTiDu5eycm2/H/o6Sn0/iu15711iWnp4kW7Zg4UMWbj9WAFYGLByBNQQWToA1Ca4hUBsCqvoBwCsAj2tlDJx3DeBCRM6HyKligKp+BPBmyMKGc89F5H2tvFoA/gJ4COCpiPyuXXzIPFU9AvALwLWIHNbKqgVAaxc0nHfrnAARqbKDulRNVNU5ANBiuTMAwoVVlQnxK4ArESE9zYaqMsyeADgWkUsKDkJgPAa4Rd65bL9hUAcAGk8QzkSESdJsqOpbAKw6lyJy7AUnmMjqQMCoB//uHckQUFWWNyYZJrvo8ACoKkFiJr4BcCQijE+zoarUgcY84Dq+9GVCkTowSfeC0AcAqfYSwE96NjQqWJgePwkY8kJEfvRZrqrPXQnlbw5+/6lw3nc3h7pdkBFNIguSoHMc//cMwDcRoY7J0QeAL3UHXY9GkL9zIOWMJ0vIltjI1nMHHo0mE9rRTYIOhD8lJbIPAJ/pD7s0CgC4cp7gjqyX9k5578EzN49GML49KCUMYjiQdfxhYowmQa9jrkKUAECvnoYglAoPvaSqPqQ2PK2qnhlZynZkNk6KGVmqYwkAZslsAkFkYZNTADRss2DAF5fk7sXdBMaYLDEYgJwAEy2NhLjkx9zQJtqc/tkQyAkw0t1UTJBThodAp8buugeQAupebyAog3YAzKwHkAKirTBmVSDY7u68B5CyOtYbGAOAZM01DeBKYV2DVwBczyKXxIurQCmilQ4cPG1lQMfjpQ5bGdCTWe8lvVJEB3M5IcC13NiK932E0qW4R+BhLnpU3wsGqOpnd/wtNbr7XbJ1PnsAgmYrjWIfoekCOUCyfYQcc/cBAFKX7a2NZmtJH+F/AMB3pmKtOTZu2fq6FZGDWHwsBYA7EYl2r0cDgPvvKe4FVdWHQFUrbUwASE02Q09rU3PJvE4SZO+QHSqO1+4ugn8nm6ljA8DFpwChr51eguONiETfMVRXgc7dwBQgcANEIFgRthm8rTox3whFLkdGB6HP6skPQ4l7uZ2BMBcAJskJJfU+l/y8jCE5wN/Zx/SZ/OnM5AzYJgtN8e0UAPDaibdDk3s3B2DQFG3L3RghMLQW5+yw+L99WxxAewhxpy9ePT2y0NZQBms9K1DzXtDqYiS5BzdUfBRRJcfkkirgX33x22YPnntvM4o1Wwh1ni86I2QBcFTah7hPQZR9csOJ2YeS7mlLzR58C9+ZfspHXXxJ1vteqYgBpmrNVFiWATPV20ytFQAzKPdU0MqAPXWcmdorA8yg3FNBi2fAPyTP2V9nolFUAAAAAElFTkSuQmCC"},35:function(e,t,n){e.exports=n(54)},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},48:function(e,t){},49:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(18),c=n.n(l),i=n(23),o=n(8),s=n(14),u=n(31),d=n(32),m=n(2),p={name:"",email:"",password:""};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_USER_INFO":return Object(m.a)({},t.user);default:return e}},E=n(28),b={currencies:[],expenses:[],totalExpenses:0};function g(e,t){var n=e.findIndex((function(e){return e.id===t.expense.id}));return e.splice(n,1,t.expense),e}var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EXPENSE":return Object(m.a)(Object(m.a)({},e),{},{expenses:[].concat(Object(E.a)(e.expenses),[t.expense])});case"DELETE_EXPENSE":return Object(m.a)(Object(m.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.id}))});case"EDIT_EXPENSE":return Object(m.a)(Object(m.a)({},e),{},{expenses:g(Object(E.a)(e.expenses),t)});case"UPDATE_CURRENCIES":return Object(m.a)(Object(m.a)({},e),{},{currencies:t.currencies});case"UPDATE_TOTAL_EXPENSES":return Object(m.a)(Object(m.a)({},e),{},{totalExpenses:e.expenses.length?e.expenses.reduce((function(e,t){var n=t.value,a=t.currency,r=t.exchangeRates;return e+ +n*+Object.values(r).find((function(e){return e.code===a})).ask}),0):0});case"SUM_TO_TOTAL_EXPENSES":return Object(m.a)(Object(m.a)({},e),{},{totalExpenses:e.totalExpenses+t.value});default:return e}},f=Object(s.combineReducers)({user:h,wallet:v}),O=Object(s.createStore)(f,Object(u.composeWithDevTools)(Object(s.applyMiddleware)(d.a))),j=(n(44),n(3)),y=n(4),A=n(9),C=n(6),x=n(5),w=n(7),k=n(15);var S=n(20),N=n.n(S),D=(n(45),function(e){Object(C.a)(n,e);var t=Object(x.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).state={name:"",email:"",password:"",buttonDisabled:!0},e.handleChange=e.handleChange.bind(Object(A.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(A.a)(e)),e}return Object(y.a)(n,[{key:"isEmailValid",value:function(e){return/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(e)}},{key:"handleChange",value:function(e){var t,n=e.target,a=n.name,r=n.value,l=this.state,c=l.email,i=l.password;"email"===a&&(c=r),"password"===a&&(i=r);var o=i.length>=6;this.setState((t={},Object(k.a)(t,a,r),Object(k.a)(t,"buttonDisabled",!(this.isEmailValid(c)&&o)),t))}},{key:"handleSubmit",value:function(){var e=this.state,t=e.name,n=e.email,a=e.password,r=this.props,l=r.handleLogin,c=r.saveUserInfo;l(),c({name:t,email:n,password:a}),localStorage.setItem("trybe-wallet-email",n),localStorage.setItem("trybe-wallet-name",t)}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,a=e.password,l=e.buttonDisabled;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"logo-login-container"},r.a.createElement("img",{src:N.a,alt:"logo icon"}),r.a.createElement("span",{className:"trybe"},"TRYBE"),r.a.createElement("span",{className:"wallet"},"Wallet")),r.a.createElement("div",{className:"login-container"},r.a.createElement("h1",{className:"login-title"},"Login"),r.a.createElement("form",{className:"login-form"},r.a.createElement("input",{type:"text",name:"name",id:"nome-input","data-testid":"nome-input",placeholder:"Nome",value:t,onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"email",id:"email-input","data-testid":"email-input",placeholder:"Email",value:n,onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password",id:"password-input","data-testid":"password-input",placeholder:"Senha",value:a,onChange:this.handleChange}),r.a.createElement("button",{type:"submit",disabled:l,onClick:this.handleSubmit,className:"login-btn"},"Entrar"))))}}]),n}(r.a.Component)),T=Object(o.b)(null,(function(e){return{saveUserInfo:function(t){return e({type:"SAVE_USER_INFO",user:t})}}}))(D),B=(n(46),n(33)),P=n.n(B),F=function(e){Object(C.a)(n,e);var t=Object(x.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.name,a=e.totalExpenses;t=t||localStorage.getItem("trybe-wallet-email"),n=n||localStorage.getItem("trybe-wallet-name");var l=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"});return r.a.createElement("header",null,r.a.createElement("div",{className:"logo-header-container"},r.a.createElement("img",{src:N.a,alt:"logo icon"}),r.a.createElement("span",{className:"trybe"},"TRYBE"),r.a.createElement("span",{className:"wallet"},"Wallet")),r.a.createElement("div",{className:"total-expenses-container"},r.a.createElement("span",null,"Despesa Total: "),r.a.createElement("span",{"data-testid":"total-field"},l.format(a)),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL")),r.a.createElement("div",{className:"user-info-container"},r.a.createElement("img",{className:"profile-picture",src:"https://www.gravatar.com/avatar/".concat(P()(t).toString()),alt:"Foto de Perfil"}),r.a.createElement("div",{className:"name-and-email"},r.a.createElement("div",null,n),r.a.createElement("div",{"data-testid":"email-field"},t))))}}]),n}(a.Component);F.defaultProps={totalExpenses:0};var U=Object(o.b)((function(e){return{name:e.user.name,email:e.user.email,totalExpenses:e.wallet.totalExpenses}}),null)(F),R=function(e){Object(C.a)(n,e);var t=Object(x.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.onChange,a=e.label,l=e.value,c=e.type;return r.a.createElement("label",{htmlFor:"".concat(t,"-input")},a,r.a.createElement("input",{type:c,name:t,id:"".concat(t,"-input"),onChange:n,value:l}))}}]),n}(a.Component);R.defaultProps={type:"text"};var Q=R,L=function(e){Object(C.a)(n,e);var t=Object(x.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.options,a=e.label,l=e.onChange,c=e.value;return r.a.createElement("label",{htmlFor:"".concat(t,"-input")},a,r.a.createElement("select",{name:t,id:"".concat(t,"-input"),onChange:l,value:c},n&&n.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))}}]),n}(a.Component),M=(n(49),function(e){Object(C.a)(n,e);var t=Object(x.a)(n);function n(e){var a;Object(j.a)(this,n),a=t.call(this,e);var r=e.values,l=r.value,c=r.description,i=r.currency,o=r.method,s=r.tag;return a.state={value:l,description:c,currency:i,method:o,tag:s},a.handleChange=a.handleChange.bind(Object(A.a)(a)),a}return Object(y.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(k.a)({},n,a))}},{key:"render",value:function(){var e=this,t=this.props,n=t.currencies,a=t.onSubmit,l=t.isEditing,c=this.state,i=c.value,o=c.description,s=c.method,u=c.tag,d=c.currency;return r.a.createElement("form",{className:"expense-form"},r.a.createElement(Q,{name:"value",onChange:this.handleChange,value:i,label:"Valor",type:"number"}),r.a.createElement(Q,{name:"description",onChange:this.handleChange,value:o,label:"Descri\xe7\xe3o"}),r.a.createElement(L,{name:"currency",options:n,onChange:this.handleChange,value:d,label:"Moeda"}),r.a.createElement(L,{name:"method",options:["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],onChange:this.handleChange,value:s,label:"M\xe9todo de pagamento"}),r.a.createElement(L,{name:"tag",options:["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],onChange:this.handleChange,value:u,label:"Tag"}),r.a.createElement("button",{type:"submit",className:"submit-btn",disabled:""===o||""===i,onClick:function(t){t.preventDefault(),a({value:i,description:o,currency:d,method:s,tag:u}),e.setState({value:"",description:""})}},l?"Editar Despesa":"Adicionar Despesa"))}}]),n}(a.Component));M.defaultProps={isEditing:!1,values:{value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"}};var Y=Object(o.b)((function(e){return{currencies:e.wallet.currencies}}),null)(M),I=function(e){Object(C.a)(n,e);var t=Object(x.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).onSubmit=e.onSubmit.bind(Object(A.a)(e)),e}return Object(y.a)(n,[{key:"onSubmit",value:function(e){var t=this.props,n=t.addExpense,a=t.expenses,r=a.length?a[a.length-1].id+1:0;n(Object(m.a)({id:r},e))}},{key:"render",value:function(){return r.a.createElement(Y,{onSubmit:this.onSubmit})}}]),n}(a.Component);I.defaultProps={expenses:[]};var J=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{addExpense:function(t){return e((n=t,function(e){return fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(t){var a=Object.keys(t),r=Object.values(t),l=a.reduce((function(e,t,n){return e[t]=r[n],e}),{}),c=parseFloat(l[n.currency].ask)*parseFloat(n.value);e(function(e){return{type:"ADD_EXPENSE",expense:e}}(Object(m.a)(Object(m.a)({},n),{},{exchangeRates:l}))),e(function(e){return{type:"SUM_TO_TOTAL_EXPENSES",value:e}}(c))}))}));var n}}}))(I),W=function(e){Object(C.a)(n,e);var t=Object(x.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"componentDidUpdate",value:function(){(0,this.props.updateTotal)()}},{key:"getFormmatedValue",value:function(e,t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:e}).format(t)}},{key:"render",value:function(){var e=this.props,t=e.expenseObj,n=t.id,a=t.description,l=t.tag,c=t.method,i=t.value,o=t.currency,s=t.exchangeRates,u=e.deleteExp,d=e.updateTotal,m=e.handleEditing;return r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,l),r.a.createElement("td",null,c),r.a.createElement("td",null,this.getFormmatedValue(o,+i)),r.a.createElement("td",null,s[o].name.split("/")[0]),r.a.createElement("td",null,this.getFormmatedValue(o,s[o].ask)),r.a.createElement("td",null,this.getFormmatedValue("BRL",i*s[o].ask)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{id:"edit-btn",type:"button","data-testid":"edit-btn",onClick:function(){m(n)}},"Edit"),r.a.createElement("button",{id:"delete-btn","data-testid":"delete-btn",type:"button",onClick:function(){u(n),d()}},"Delete")))}}]),n}(a.Component),V=Object(o.b)(null,(function(e){return{deleteExp:function(t){return e(function(e){return{type:"DELETE_EXPENSE",id:e}}(t))},updateTotal:function(){return e({type:"UPDATE_TOTAL_EXPENSES"})}}}))(W),X=(n(50),function(e){Object(C.a)(n,e);var t=Object(x.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){var e=this.props,t=e.expenses,n=e.handleEditing;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(V,{key:e.id,expenseObj:e,handleEditing:n})}))))}}]),n}(a.Component)),q=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),null)(X),K=function(e){Object(C.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).onSubmit=a.onSubmit.bind(Object(A.a)(a)),a}return Object(y.a)(n,[{key:"onSubmit",value:function(e){var t=this.props,n=t.editExpense,a=t.id,r=t.expense;n(Object(m.a)(Object(m.a)({id:a},e),{},{exchangeRates:r.exchangeRates}))}},{key:"render",value:function(){var e=this.props.expense;return r.a.createElement(Y,{values:e,onSubmit:this.onSubmit,isEditing:!0})}}]),n}(a.Component),_=Object(o.b)(null,(function(e){return{editExpense:function(t){return e({type:"EDIT_EXPENSE",expense:t})}}}))(K),Z=n(25),H=n.n(Z),z=n(34),G=function(){var e=Object(z.a)(H.a.mark((function e(){var t,n,a;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:return delete(n=e.sent).USDT,a=Object.keys(n),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e){Object(C.a)(n,e);var t=Object(x.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).state={isEditing:!1,currentlyEditing:void 0,id:void 0},e.handleEditing=e.handleEditing.bind(Object(A.a)(e)),e}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.setCurrencies;G().then(e)}},{key:"handleEditing",value:function(e){var t=this.props.expenses.find((function(t){return t.id===e}));this.setState((function(n){return{isEditing:!n.isEditing,id:e,currentlyEditing:t}}))}},{key:"render",value:function(){var e=this.state,t=e.isEditing,n=e.id,a=e.currentlyEditing;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header-container"},r.a.createElement(U,null),t?r.a.createElement(_,{id:n,expense:a}):r.a.createElement(J,null)),r.a.createElement(q,{handleEditing:this.handleEditing}))}}]),n}(r.a.Component);$.defaultProps={expenses:[]};var ee=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{setCurrencies:function(t){return e(function(e){return{type:"UPDATE_CURRENCIES",currencies:e}}(t))}}}))($),te=(n(52),function(e){Object(C.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={isLogged:!1},a.handleLogin=a.handleLogin.bind(Object(A.a)(a)),a}return Object(y.a)(n,[{key:"handleLogin",value:function(){this.setState({isLogged:!0})}},{key:"render",value:function(){var e=this.state.isLogged;return r.a.createElement(w.d,null,r.a.createElement(w.b,{path:"/",exact:!0},e?r.a.createElement(w.a,{to:"/carteira"}):r.a.createElement(T,{handleLogin:this.handleLogin})),r.a.createElement(w.b,{path:"/carteira"},r.a.createElement(ee,null)))}}]),n}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,{store:O},r.a.createElement(i.a,null,r.a.createElement(te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.93883334.chunk.js.map